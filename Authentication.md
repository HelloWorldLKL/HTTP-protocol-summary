# 认证

## BASIC认证

+ 步骤：
  1. 客户端向服务器发送请求
  2. 服务器返回 401 状态码，告知客户端需要进行认证
  3. 客户端将用户名和密码以 Base64 方式编码并发送
  4. 服务器对信息进行验证，正确返回 200，错误则返回 401
+ 缺点：Base64 并非加密，在通信过程中被窃听后，信息极易被盗

> Base64是网络上最常见的用于传输8Bit字节码的编码方式之一，Base64就是一种基于64个可打印字符来表示二进制数据的方法。可查看RFC2045～RFC2049，上面有MIME的详细规范。
> Base64编码是从二进制到字符的过程，可用于在HTTP环境下传递较长的标识信息。例如，在Java Persistence系统Hibernate中，就采用了Base64来将一个较长的唯一标识符（一般为128-bit的UUID）编码为一个字符串，用作HTTP表单和HTTP GET URL中的参数。在其他应用程序中，也常常需要把二进制数据编码为适合放在URL（包括隐藏表单域）中的形式。此时，采用Base64编码具有不可读性，需要解码后才能阅读。

## DIGEST认证

+ 步骤：
  1. 客户端向服务器发送请求
  2. 服务器返回 401 状态码，告知客户端需要进行认证，并发送临时的质询码（随机数，nonce）
  3. 浏览器会收集用户的信息，并对用户名、密码、nonce值、HTTP请求方法、被请求资源URI等组合后进行MD5运算，把计算得到的摘要信息发送给服务端，请求头部类似如下，Authorization: Digestsusername="xxxxx",realm="myTomcat",qop="auth",nonce="xxxxx",uri="xxxx",cnonce="xxxxxx",nc=00000001,response="xxxxxxxxx",opaque="xxxxxxxxx" 。其中username是用户名；cnonce是客户端生成的随机字符串；nc是运行认证的次数；response就是最终计算得到的摘要。
  4. 服务器通过报文中的 username 查询到对应的密码，并用与客户端相同的方法生成 MD5 摘要信息，比对后返回状态码，正确返回 200，错误则返回 401
+ 缺点：DIGEST模式避免了密码在网络上明文传输，比BASIC认证强，但是无法防止用户伪装，比如攻击者可以截取用户发送的报文，自己发送给服务端，服务端就会认为攻击者是真正的用户

> MD5 不是加密算法，它属于一种哈希(Hash)算法，即散列函数，一个 MD5 可能对应无数种可能的明文，在做算法时会丢失部分信息，它是一种单向密码体制，即它是一个从明文到密文的不可逆的映射，只有加密过程，没有解密过程。

## SSL客户端认证

+ 步骤：
  1. 客户端向服务器发送请求
  2. 服务器发送报文请求客户端证书
  3. 用户选择客户端证书以后，客户端会将证书信息以报文方式
  4. 服务器验证客户端证书通过后，取出证书中的公钥，开始 HTTPS 加密通信
+ 缺点：客户端证书是要钱的

## 表单认证

没啥说的，就是填表单，然后交给人家的程序吧

> 加盐密码
>
> 其实就是在用户真正的密码后面加入一个随机串来进行保存，防止被攻击者脱裤

## 参考资料

- [认证模式之Digest模式](http://blog.csdn.net/wangyangzhizhou/article/details/51163751)